# オラクルDB（Oracle Database）の**起動時の仕組み**

オラクルDBは起動時に「段階的」に動きます。大まかに3つのフェーズに分かれています。

| フェーズ         | 内容 |
|:----------------|:--------------------------------------------------------|
| **1. インスタンス起動（Instance Startup）** | メモリ領域（SGA）とバックグラウンドプロセス（例：PMON, SMON）が立ち上がる |
| **2. データベースマウント（Mount）** | 制御ファイル（control file）を読み込む。DBファイルやREDOログファイルを認識する |
| **3. データベースオープン（Open）** | データファイルとREDOログファイルをオープンし、ユーザー接続が可能になる |

順番にもう少し詳しくみていきます。

---

## 1. インスタンス起動 (STARTUP NOMOUNT)

- **SGA（System Global Area）**という共有メモリ領域を確保します。
- **バックグラウンドプロセス**（PMON、SMON、DBWR、LGWRなど）が起動します。
- まだデータベースファイルや制御ファイルにはアクセスしていません。
- 初期化パラメータファイル（`init.ora` または `spfile.ora`）を読み込みます。

 つまり、「Oracleの頭脳（プロセスとメモリ）」だけが起きた状態。

---

## 2. データベースマウント (STARTUP MOUNT)

- **制御ファイル（control file）**を読み込みます。
- 制御ファイルには、どのデータファイル・REDOログファイルが必要かの情報が書かれています。
- まだ一般ユーザーはデータにアクセスできません（管理作業専用モード）。

 つまり、「どのファイルを使うか把握した状態」。

---

## 3. データベースオープン (STARTUP OPEN)

- **データファイル**と**REDOログファイル**をオープンします。
- 必要に応じてリカバリ（障害復旧）が走ることもあります（クラッシュリカバリ）。
- すべて正常なら、ユーザーが接続してSQLを発行できるようになります。

 つまり、「実際に使える状態」になります。

---

# OracleDBの**起動に関わるアプリケーション（ツール）**

オラクルDBを起動するために、主に以下のツールが使われます。

| ツール名 | 役割 |
|:--------|:--------------------------------------------------------|
| **SQL*Plus** | Oracle純正のコマンドラインツール。DB起動・停止を直接実行できる |
| **RMAN (Recovery Manager)** | 主にバックアップやリカバリ作業用だが、起動・停止もできる |
| **Enterprise Manager (OEM)** | OracleのGUI管理ツール。ブラウザ上からDB起動・停止できる |
| **OSレベルのサービス/プロセス** | OS（Windowsならサービス、Linuxならプロセス）で自動起動できる |

たとえば、SQL*Plusなら次のようにして起動します：

```sql
sqlplus / as sysdba

-- 起動コマンド
startup
```

また、オプションで細かく制御できます。

| コマンド | 意味 |
|:--------|:--------------------------------------------------------|
| `startup nomount` | インスタンス起動だけする（制御ファイルは開かない） |
| `startup mount` | 制御ファイルを開く |
| `startup open` | データベース全体をオープンする |

---

# イメージ図でまとめると

```
起動フェーズ        起動するもの
──────────────────────────────
インスタンス起動   → メモリ（SGA）＋バックグラウンドプロセス
データベースマウント → 制御ファイル
データベースオープン → データファイル＋REDOログファイル
──────────────────────────────
```



